---
title: "Tutorial 1: Brain Imaging Data Structure"
teaching: 15
exercises: 45
questions:
- "What is BIDS?"
- "Why BIDS?"
- "How a BIDS dataset can be made?"
- "How a BIDS dataset can be query?"
objectives:
- Introduction to BIDS and its ecosystem
- Getting familiar with the dataset that will be used throughout most of the tutorials of the summer school
keypoints:
- BIDS is a community-driven standard to organize your existing raw data, with well-accepted file formats, to improve consistent and complete documentation and to facilitate re-use by your future self and others.
- BIDS is not a new file format or a search engine or a data sharing tool.
---

### Introduction

The dataset that will be used throughout most of the tutorials of the summer school follows the Brain Imaging Data Structure (BIDS) standard. This tutorial introduces you to BIDS and its eco-system.

> ## Tutorial outline
> - What is BIDS?
> - Why BIDS?
> - Getting familiar with BIDS and the summer school dataset
> - How can I convert to BIDS?
{: .callout}

<!-- > ## Tutorial requirements
>
> It is essential to have a basic understanding of:
> - Unix operating system, command line, shell, and Python
>
> Although not essential it is also helpful to have an understanding of:
> - How brain imaging data are exported from a scanner
{: .callout} -->

###  What is BIDS? from [http://www.repronim.org/module-FAIR-data/01-Web-of-Data/](http://www.repronim.org/module-FAIR-data/01-Web-of-Data/)

[Brain Imaging Data Structure](http://bids.neuroimaging.io) (BIDS) is a community developed file organization and naming scheme ([GitHub Repository](https://github.com/INCF/BIDS)) that makes it easier to publish data and share it with others in a consistent format. BIDS is being developed within the [International Neuroinformatics Coordinating Facility](http://incf.org) and in the collaboration with many scientists working in the neuroimaging field. The goal of BIDS is to define a powerful, flexible, and consistent framework for integrating the diverse types of experimental data routinely acquired in neuroimaging studies. Provisions are included in BIDS to accommodate these data types: subject-level variables (e.g. gender, age, handedness); longitudinal and multi-session studies; structural, anatomical imaging data; resting state and task-based fMRI data; task event information; diffusion-weighted imaging data; field maps for correcting for B0 inhomogeneity; physiological monitoring output acquired during MRI experiments; behavioral data collected without MRI; and standardized metadata to describe the conditions and parameters of the experiment data.

> ## Selected External Lesson Material
> 1. Krzysztof Gorgolewski's overview of BIDS and reproducibility: [Towards open and reproducible neuroscience in the age of big data](https://www.slideshare.net/chrisfilo1/towards-open-and-reproducible-neuroscience-in-the-age-of-big-data)
> 2. The [BIDS Specification](https://bids-specification.readthedocs.io/en/stable/)
> 3. "The brain imaging data structure, a format for organizing and describing outputs of neuroimaging experiments" (Gorgolewski et al 2016) [doi:10.1038/sdata.2016.44](http://n2t.net/doi:10.1038/sdata.2016.44)
{: .callout}

<!-- BIDS (Brain Imaging Data Structure) is a standard for the organization and description of neuroimaging and corresponding behavioral data, which has been largely lacking within the neuroimaging community. More specifically, data that come off the scanner are converted to NIFTI and JSON files, organized into a specific directory schema, and labeled following a precise naming convention. The result is an organized dataset that can be easily shared and understood by other researchers. -->

Originaly developed for MRI, Extended to EEG...

Success reason:
* Right moment when researchers
* Not a database
* Flexibity and evolution design principles

###  Why BIDS? adapted from [Andy's Brain Book](https://andysbrainbook.readthedocs.io/en/latest/OpenScience/OS/BIDS_Overview.html)

1. Reproducibility and Data Sharing: One of the more common issues that can arise for imaging researchers is receiving data from a colleague and not being able to make heads or tails of it: how the data are named and organized do not make intuitive sense to you, finding pertinent information (e.g. Repetition Time) is time-consuming, etc. What transpires is time wasted trying to make sense of the data, leading to needless back and forth with colleague(s). Thanks to the BIDS specifications, the hassles of data sharing are largely alleviated. By extension, improved data sharing allows researchers to better assess and reproduce others’ experimental findings.

2. Access to [“BIDS-apps”](https://bids-apps.neuroimaging.io/): Once converted to BIDS, data can be applied to software packages that take BIDS datasets as their input, colloquially referred to as “BIDS-apps”. Two of the most common and used apps are MRIQC (a quality control pipeline that generates metrics of your data), and fMRIPrep (a standarized pre-processing pipeline). Having access to fMRIPrep is incredibly useful, as labs (and even individuals within a single lab) typically have their own idiosyncratic pre-processing pipelines, which can influence findings in subsequent analyses, and create confusion for others when attempting to re-process the data. By having a standarized pipeline such as fMRIPrep, which incorporates different sofware packages (such as FSL, AFNI, ANTs, FreeSurfer, and nipype), datasets across labs/institutions can be pre-processed in a highly reproducible and transparent manner.

3. Share your own BIDS-app(s): It is not uncommon for researchers to develop a novel analysis tool or technique that languishes on their Github or some other repository, unable to gain exposure in the neuroimaging community. As BIDS becomes increasingly popular however, dataset organization and pre-processing is becoming more standardized, which can be used by various BIDS-apps. By developing a tool that can handle BIDS data, you have created a BIDS-app that is potentially applicable to a large range of users.

###  Getting familiar with BIDS and the summer school dataset

> ## Exercise: Create a BIDS-compliant summerschool sample dataset (click on the arrow to open)
>
> In this exercise you will work through the creation of a BIDS dataset using sample data originally obtained from the [VEPCON dataset](https://openneuro.org/datasets/ds003505/versions/1.0.2).  Please follow the following steps:
>
> 1. Download the [sample base dataset]({{site.root}}/data/ds000030_single_subj_base.zip) This sample data has been modified from the original OpenFMRI distribution for use in this exercise.
> 2. Working with the BIDS material provided (above) and information from the [data publication in Nature Scientific Data](https://www.nature.com/articles/sdata2016110) and re-work the base dataset to conform to BIDS.
> 3. As you work through this exercise - you can use the [BIDS validator](http://incf.github.io/bids-validator/) to check your progress (must use Google Chrome or Firefox).
>
> > ## Solution (click on the arrow to open)
> >
> > We have made the original BIDS dataset for the single subject available:
> >
> > 1. Download the [sample BIDS dataset]({{site.root}}/data/ds000030_single_subj.zip)
> {: .solution}
{: .challenge}

> ## Exercise: Manipulate the summerschool dataset in Python (click on the arrow to open)
>
> In this exercise you will work through the manipulation of the summerschool sample dataset in Python with the help of the `pybids` library.  Please follow the following steps:
>
> 1. Open a terminal in the VM
> 2. Launch `ipython`
> 3. Import the `BIDSLayout` class from the `pybids` library
> 4. Print a general overview of the object (hint: use the `print()` method)
> 5. Initialize a `BIDSLayout` object with the path of summerschool sample dataset
> 6. Use the `get()` method on the created object to get the path of the T1w image of `sub-01` (hint: check the [`pybids` tutorial](https://github.com/bids-standard/pybids/blob/master/examples/pybids_tutorial.ipynb))
> 7. Similarly, use the `get()` method on the created object to get the path of the diffusion image of `sub-01`
> 8. List the available EEG tasks (hint: use `get_tasks()`)
>
> > ## Solution (click on the arrow to open)
> > ~~~
> > # Import the BIDSLayout class from pybids
> > from bids import BIDSLayout
> >
> > # Create the BIDSLayout object representing the summerschool sample dataset
> > layout = BIDSLayout ("$HOME/Data/ds003505")
> >
> > # Get the list of T1w images available for sub-01
> > t1_files = layout.get(subject='01', extension='nii.gz', suffix='T1w', return_type='filename')
> > print(t1_files)
> >
> > # Get the list of DWI images available for sub-01
> > dwi_files = layout.get(subject='01', extension='nii.gz', suffix='dwi', return_type='filename')
> > print(dwi_files)
> >
> > # Get the list of EEG tasks available 
> > eeg_tasks = layout.get_tasks()
> > ~~~
> > {: .language-python}
> {: .solution}
{: .challenge}

###  How can I convert to BIDS?

For MRI data, you will need to have access to your or others’ raw data (e.g. dicoms) in order to perform the conversion. There are several different packages that can be used to accomplish this, such as [dcm2bids](https://github.com/UNFmontreal/Dcm2Bids), [heudiconv](https://github.com/nipy/heudiconv)/[reproin](https://github.com/ReproNim/reproin), [bidscoin](https://github.com/Donders-Institute/bidscoin), [bidskit](https://github.com/jmtyszka/bidskit).

For EEG data, you will need to have access to the raw EEG files in order to perform the conversion. There are several different packages that have been developed to support this process, such as [mne-bids](https://github.com/mne-tools/mne-bids), [Fieldtrip](https://github.com/fieldtrip/fieldtrip) [data2bids](https://www.fieldtriptoolbox.org/reference/data2bids/), [bids-matlab-tools EEGLab addon](https://github.com/sccn/bids-matlab-tools), [BrainVision bv2bids](https://pressrelease.brainproducts.com/bv2bids/).

For physiological data, there exist [physio2bids](https://github.com/tarrlab/physio2bids) and [bidscoin](https://github.com/Donders-Institute/bidscoin) for data recorded with Siemens MRI scanner, and [phys2bids](https://github.com/physiopy/phys2bids) for data recorded by AcqKnowledge (BIOPAC) and Labchart (ADInstruments).

Admittingly, most BIDS converters require a bit of user input and work. A number of great tutorials are available online to help you getting started.

> ## Selected external tutorials
>
> **MRI data tools**
>
> *   dcm2bids:
>
>     *   [https://unfmontreal.github.io/Dcm2Bids/docs/2-tutorial/](https://unfmontreal.github.io/Dcm2Bids/docs/2-tutorial/)
>
>     *   [https://andysbrainbook.readthedocs.io/en/latest/OpenScience/OS/BIDS_Overview.html#bids-tutorial](https://andysbrainbook.readthedocs.io/en/latest/OpenScience/OS/BIDS_Overview.html#bids-tutorial)
>
> *   heudiconv: [https://reproducibility.stanford.edu/bids-tutorial-series-part-2a/](https://reproducibility.stanford.edu/bids-tutorial-series-part-2a/)
>
> *   bidskit: [https://github.com/jmtyszka/bidskit/blob/HEAD/docs/QuickStart.md](https://github.com/jmtyszka/bidskit/blob/HEAD/docs/QuickStart.md)
>
> *   bidscoin: [https://bidscoin.readthedocs.io/en/latest/tutorial.html](https://bidscoin.readthedocs.io/en/latest/tutorial.html)
>
> **EEG data tools**
>
> *   MNE-BIDS: [https://mne.tools/mne-bids/stable/auto_examples/convert_eeg_to_bids.html](https://mne.tools/mne-bids/stable/auto_examples/convert_eeg_to_bids.html)
>
> *   data2bids (FieldTrip): [https://www.fieldtriptoolbox.org/example/bids_eeg/](https://www.fieldtriptoolbox.org/example/bids_eeg/)
>
> *   bids-matlab-tools (EEGlab): [https://github.com/sccn/bids-matlab-tools/wiki](https://github.com/sccn/bids-matlab-tools/wiki)
>
> **Physiological data tools**
>
> *   Tutorial for phys2bids: [https://github.com/sccn/bids-matlab-tools/wiki](https://github.com/sccn/bids-matlab-tools/wiki)
{: .callout}

> ## Additional materials
>   - [ReproNim lessons](https://www.repronim.org/teach.html)
>   - [BIDS starter kit](https://github.com/bids-standard/bids-starter-kit)
>   - [Short presentation of BIDS by Jean-Baptiste Poline](https://www.youtube.com/watch?v=kxj0PLyzYsg&ab_channel=INCF)
>   - [BIDS data format for Neuroimaging: Export/Import BIDS EEG data from EEGLAB](https://www.youtube.com/watch?v=EClpeP7WREw&ab_channel=EEGLAB)
{: .callout}